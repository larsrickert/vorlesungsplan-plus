{"version":3,"sources":["./src/app/pages/events/events.page.html","./src/app/pages/events/events.module.ts","./src/app/pages/events/events-routing.module.ts","./src/app/pages/events/events.page.ts","./src/app/pages/events/events.page.scss"],"names":[],"mappings":"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","file":"pages-events-events-module-es2015.js","sourcesContent":["export default \"<app-header title=\\\"Veranstaltungen ({{ count }})\\\"></app-header>\\n\\n<ion-content class=\\\"ion-padding\\\" [fullscreen]=\\\"true\\\">\\n  <ion-searchbar\\n    animated\\n    showCancelButton=\\\"focus\\\"\\n    mode=\\\"ios\\\"\\n    placeholder=\\\"Suchen...\\\"\\n    cancelButtonText=\\\"Abbrechen\\\"\\n    (ionChange)=\\\"search($event)\\\"\\n    class=\\\"event__search\\\"\\n    #searchbar\\n  ></ion-searchbar>\\n\\n  <div class=\\\"noEvents\\\" *ngIf=\\\"loaded && blocks.length === 0\\\">\\n    Aktuell gibt es keine anstehenden Veranstaltungen.\\n  </div>\\n\\n  <div class=\\\"noEvents\\\" *ngIf=\\\"!loaded && blocks.length === 0\\\">\\n    Veranstaltungen werden geladen...\\n    <ion-progress-bar type=\\\"indeterminate\\\"></ion-progress-bar>\\n  </div>\\n\\n  <div\\n    class=\\\"noEvents\\\"\\n    *ngIf=\\\"loaded && blocks.length > 0 && searchbar && searchbar.value !== '' && displayedBlocks.length === 0\\\"\\n  >\\n    Deine Suche hat keine Treffer ergeben\\n  </div>\\n\\n  <div *ngIf=\\\"blocks.length > 0\\\">\\n    <app-block\\n      *ngFor=\\\"let block of displayedBlocks\\\"\\n      [block]=\\\"block\\\"\\n    ></app-block>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EventsPageRoutingModule } from './events-routing.module';\n\nimport { EventsPage } from './events.page';\nimport { SharedModule } from 'src/app/modules/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EventsPageRoutingModule,\n    SharedModule,\n  ],\n  declarations: [EventsPage],\n})\nexport class EventsPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EventsPage } from './events.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EventsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EventsPageRoutingModule {}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { IEventBlock } from 'src/app/interfaces/IBlock';\nimport { EventService } from 'src/app/services/event/event.service';\nimport { UtilityService } from 'src/app/services/utility/utility.service';\n\n@Component({\n  selector: 'app-events',\n  templateUrl: './events.page.html',\n  styleUrls: ['./events.page.scss'],\n})\nexport class EventsPage implements OnInit {\n  blocks: IEventBlock[] = [];\n  displayedBlocks: IEventBlock[] = [];\n  count = 0;\n  @ViewChild('searchbar') searchbar: HTMLIonSearchbarElement;\n  loaded = false;\n\n  constructor(\n    private eventService: EventService,\n    private utility: UtilityService\n  ) {}\n\n  ngOnInit() {\n    this.eventService.events.subscribe((events) => {\n      this.blocks = <IEventBlock[]>this.utility.createBlocks(events);\n      this.displayedBlocks = this.blocks;\n      this.count = this.countEvents();\n    });\n\n    this.eventService\n      .fetchEvents()\n      .then(() => {\n        this.loaded = true;\n      })\n      .catch(() => {\n        this.loaded = true;\n      });\n  }\n\n  search(ev: any): void {\n    let searchedValue = ev.target.value.toLowerCase();\n\n    if (searchedValue === '') {\n      // display blocks of active segment when search is canceled or cleared\n      this.displayedBlocks = this.blocks;\n      return;\n    } else if (searchedValue.trim() === '') {\n      // do nothing when empty search input is entered\n      return;\n    }\n\n    searchedValue = searchedValue.trim();\n\n    const results: IEventBlock[] = [];\n\n    this.blocks.forEach((block) => {\n      const matchingEvents = block.items.filter((event) => {\n        let match = false;\n\n        if (event.name.toLowerCase().includes(searchedValue)) {\n          match = true;\n        }\n\n        if (\n          event.location &&\n          event.location.toLowerCase().includes(searchedValue)\n        ) {\n          match = true;\n        }\n\n        return match;\n      });\n\n      if (matchingEvents.length > 0) {\n        results.push({ date: block.date, items: matchingEvents });\n      }\n    });\n\n    this.displayedBlocks = results;\n  }\n\n  countEvents() {\n    let count = 0;\n\n    this.blocks.forEach((block) => {\n      count += block.items.length;\n    });\n\n    return count;\n  }\n}\n","export default \".noEvents {\\n  margin: 10px;\\n}\\n\\n.event__search {\\n  margin-bottom: 20px;\\n}\\n\\nion-progress-bar {\\n  margin-top: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZXZlbnRzL2V2ZW50cy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFBO0FBQ0Y7O0FBRUE7RUFDRSxtQkFBQTtBQUNGOztBQUVBO0VBQ0UsZ0JBQUE7QUFDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2V2ZW50cy9ldmVudHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm5vRXZlbnRzIHtcclxuICBtYXJnaW46IDEwcHg7XHJcbn1cclxuXHJcbi5ldmVudF9fc2VhcmNoIHtcclxuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG59XHJcblxyXG5pb24tcHJvZ3Jlc3MtYmFyIHtcclxuICBtYXJnaW4tdG9wOiAxMHB4O1xyXG59XHJcbiJdfQ== */\";"],"sourceRoot":"webpack:///"}