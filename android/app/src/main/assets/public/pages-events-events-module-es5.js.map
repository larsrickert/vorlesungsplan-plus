{"version":3,"sources":["webpack:///src/app/pages/events/events.page.html","webpack:///src/app/pages/events/events.module.ts","webpack:///src/app/pages/events/events-routing.module.ts","webpack:///src/app/pages/events/events.page.ts","webpack:///src/app/pages/events/events.page.scss"],"names":["EventsPageModule","imports","declarations","routes","path","component","EventsPageRoutingModule","forChild","exports","EventsPage","eventService","utility","blocks","displayedBlocks","count","loaded","events","subscribe","createBlocks","countEvents","fetchEvents","then","ev","searchedValue","target","value","toLowerCase","trim","results","forEach","block","matchingEvents","items","filter","event","match","name","includes","location","length","push","date","selector","template"],"mappings":"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","file":"pages-events-events-module-es5.js","sourcesContent":["export default \"<app-header title=\\\"Veranstaltungen ({{ count }})\\\"></app-header>\\n\\n<ion-content class=\\\"ion-padding\\\" [fullscreen]=\\\"true\\\">\\n  <ion-searchbar\\n    animated\\n    showCancelButton=\\\"focus\\\"\\n    mode=\\\"ios\\\"\\n    placeholder=\\\"Suchen...\\\"\\n    cancelButtonText=\\\"Abbrechen\\\"\\n    (ionChange)=\\\"search($event)\\\"\\n    class=\\\"event__search\\\"\\n    #searchbar\\n  ></ion-searchbar>\\n\\n  <div class=\\\"noEvents\\\" *ngIf=\\\"loaded && blocks.length === 0\\\">\\n    Aktuell gibt es keine anstehenden Veranstaltungen.\\n  </div>\\n\\n  <div class=\\\"noEvents\\\" *ngIf=\\\"!loaded && blocks.length === 0\\\">\\n    Veranstaltungen werden geladen...\\n    <ion-progress-bar type=\\\"indeterminate\\\"></ion-progress-bar>\\n  </div>\\n\\n  <div\\n    class=\\\"noEvents\\\"\\n    *ngIf=\\\"loaded && blocks.length > 0 && searchbar && searchbar.value !== '' && displayedBlocks.length === 0\\\"\\n  >\\n    Deine Suche hat keine Treffer ergeben\\n  </div>\\n\\n  <div *ngIf=\\\"blocks.length > 0\\\">\\n    <app-block\\n      *ngFor=\\\"let block of displayedBlocks\\\"\\n      [block]=\\\"block\\\"\\n    ></app-block>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EventsPageRoutingModule } from './events-routing.module';\n\nimport { EventsPage } from './events.page';\nimport { SharedModule } from 'src/app/modules/shared/shared.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EventsPageRoutingModule,\n    SharedModule,\n  ],\n  declarations: [EventsPage],\n})\nexport class EventsPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EventsPage } from './events.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EventsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EventsPageRoutingModule {}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { IEventBlock } from 'src/app/interfaces/IBlock';\nimport { EventService } from 'src/app/services/event/event.service';\nimport { UtilityService } from 'src/app/services/utility/utility.service';\n\n@Component({\n  selector: 'app-events',\n  templateUrl: './events.page.html',\n  styleUrls: ['./events.page.scss'],\n})\nexport class EventsPage implements OnInit {\n  blocks: IEventBlock[] = [];\n  displayedBlocks: IEventBlock[] = [];\n  count = 0;\n  @ViewChild('searchbar') searchbar: HTMLIonSearchbarElement;\n  loaded = false;\n\n  constructor(\n    private eventService: EventService,\n    private utility: UtilityService\n  ) {}\n\n  ngOnInit() {\n    this.eventService.events.subscribe((events) => {\n      this.blocks = <IEventBlock[]>this.utility.createBlocks(events);\n      this.displayedBlocks = this.blocks;\n      this.count = this.countEvents();\n    });\n\n    this.eventService\n      .fetchEvents()\n      .then(() => {\n        this.loaded = true;\n      })\n      .catch(() => {\n        this.loaded = true;\n      });\n  }\n\n  search(ev: any): void {\n    let searchedValue = ev.target.value.toLowerCase();\n\n    if (searchedValue === '') {\n      // display blocks of active segment when search is canceled or cleared\n      this.displayedBlocks = this.blocks;\n      return;\n    } else if (searchedValue.trim() === '') {\n      // do nothing when empty search input is entered\n      return;\n    }\n\n    searchedValue = searchedValue.trim();\n\n    const results: IEventBlock[] = [];\n\n    this.blocks.forEach((block) => {\n      const matchingEvents = block.items.filter((event) => {\n        let match = false;\n\n        if (event.name.toLowerCase().includes(searchedValue)) {\n          match = true;\n        }\n\n        if (\n          event.location &&\n          event.location.toLowerCase().includes(searchedValue)\n        ) {\n          match = true;\n        }\n\n        return match;\n      });\n\n      if (matchingEvents.length > 0) {\n        results.push({ date: block.date, items: matchingEvents });\n      }\n    });\n\n    this.displayedBlocks = results;\n  }\n\n  countEvents() {\n    let count = 0;\n\n    this.blocks.forEach((block) => {\n      count += block.items.length;\n    });\n\n    return count;\n  }\n}\n","export default \".noEvents {\\n  margin: 10px;\\n}\\n\\n.event__search {\\n  margin-bottom: 20px;\\n}\\n\\nion-progress-bar {\\n  margin-top: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZXZlbnRzL2V2ZW50cy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFBO0FBQ0Y7O0FBRUE7RUFDRSxtQkFBQTtBQUNGOztBQUVBO0VBQ0UsZ0JBQUE7QUFDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2V2ZW50cy9ldmVudHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm5vRXZlbnRzIHtcclxuICBtYXJnaW46IDEwcHg7XHJcbn1cclxuXHJcbi5ldmVudF9fc2VhcmNoIHtcclxuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG59XHJcblxyXG5pb24tcHJvZ3Jlc3MtYmFyIHtcclxuICBtYXJnaW4tdG9wOiAxMHB4O1xyXG59XHJcbiJdfQ== */\";"]}